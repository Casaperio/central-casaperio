/**
 * ARQUIVO DE EXEMPLO - NÃO SUBSTITUIR O APP.TSX AINDA
 *
 * Este arquivo mostra como o App.tsx ficaria após integrar os componentes refatorados.
 * Use como referência para fazer a integração incremental seguindo o REFACTORING_GUIDE.md
 */

import React, { useState, useEffect, useMemo, useCallback, useRef, lazy, Suspense } from 'react';
// ... outros imports existentes ...

// Layout Components - NOVOS
import AppSidebar from './components/layout/AppSidebar';
import NotificationCenter from './components/layout/NotificationCenter';

// Hooks - NOVOS
import { useNotifications } from './hooks/app/useNotifications';

// ... resto dos imports existentes ...

function App() {
  // ... todos os estados existentes ...

  // SUBSTITUIR: Estado de notificações por hook
  // ANTES:
  // const [notifications, setNotifications] = useState<SystemNotification[]>([]);
  // const [showNotifications, setShowNotifications] = useState(false);

  // DEPOIS:
  const {
    notifications,
    showNotifications,
    addNotification,
    markAllRead,
    clearNotifications,
    toggleNotifications,
  } = useNotifications();

  // ... todos os outros estados e hooks existentes ...

  // REMOVER: Funções de notificação antigas (linhas 311-330)
  // const addNotification = (title: string, message: string, type = 'info') => { ... };
  // const markAllRead = () => { ... };
  // const clearNotifications = () => { ... };
  // const unreadCount = ... ; // Agora calculado dentro do NotificationCenter

  // ... todas as outras funções existentes ...

  // REMOVER: NavigationContent component (linhas 1002-1179)
  // const NavigationContent = () => ( ... );

  return (
    <div className="flex h-screen bg-[#fdf8f6] text-gray-800 font-sans overflow-hidden">
      {/* Mobile Menu Overlay */}
      {mobileMenuOpen && (
        <div
          className="fixed inset-0 z-40 bg-black/50 md:hidden animate-fade-in"
          onClick={() => setMobileMenuOpen(false)}
        />
      )}

      {/* REFATORADO: Mobile Sidebar com AppSidebar */}
      <aside className={`fixed top-0 left-0 bottom-0 w-64 bg-white z-50 transform transition-transform duration-300 ease-in-out md:hidden flex flex-col shadow-2xl ${mobileMenuOpen ? 'translate-x-0' : '-translate-x-full'}`}>
        <div className="absolute top-2 right-2">
          <button onClick={() => setMobileMenuOpen(false)} className="p-2 text-gray-500 rounded-full hover:bg-gray-100">
            <X size={20} />
          </button>
        </div>
        <AppSidebar
          currentUser={currentUser}
          activeModule={activeModule}
          viewMode={viewMode}
          sidebarOpen={sidebarOpen}
          mobileMenuOpen={mobileMenuOpen}
          isSystemRefreshing={isSystemRefreshing}
          lastSystemRefresh={lastSystemRefresh}
          onModuleChange={(module, view) => {
            setActiveModule(module);
            setViewMode(view);
          }}
          onViewModeChange={setViewMode}
          onToggleSidebar={() => setSidebarOpen(!sidebarOpen)}
          onCloseMobileMenu={() => setMobileMenuOpen(false)}
          onGlobalRefresh={handleGlobalRefresh}
          onLogout={handleLogout}
        />
      </aside>

      {/* REFATORADO: Desktop Sidebar com AppSidebar */}
      <aside className={`hidden md:flex ${sidebarOpen ? 'w-64' : 'w-20'} bg-white border-r border-gray-200 flex-col transition-all duration-300 z-20 shadow-sm relative`}>
        <AppSidebar
          currentUser={currentUser}
          activeModule={activeModule}
          viewMode={viewMode}
          sidebarOpen={sidebarOpen}
          mobileMenuOpen={mobileMenuOpen}
          isSystemRefreshing={isSystemRefreshing}
          lastSystemRefresh={lastSystemRefresh}
          onModuleChange={(module, view) => {
            setActiveModule(module);
            setViewMode(view);
          }}
          onViewModeChange={setViewMode}
          onToggleSidebar={() => setSidebarOpen(!sidebarOpen)}
          onCloseMobileMenu={() => setMobileMenuOpen(false)}
          onGlobalRefresh={handleGlobalRefresh}
          onLogout={handleLogout}
        />
      </aside>

      <div className="flex flex-col flex-1 w-full h-full overflow-hidden">
        <header className="z-10 flex items-center justify-between shrink-0 h-16 px-4 bg-white border-b border-gray-200 shadow-sm md:px-6">
          <div className="flex items-center flex-1 gap-4">
            <button
              onClick={() => setMobileMenuOpen(true)}
              className="p-2 -ml-2 text-gray-600 rounded-lg md:hidden hover:bg-gray-100"
            >
              <Menu size={24} />
            </button>

            {/* Search bar existente */}
            {/* ... */}
          </div>

          <div className="flex items-center gap-2 md:gap-4">
            {/* Incoming Call Notification existente */}
            {/* ... */}

            {/* Loading indicator existente */}
            {/* ... */}

            {/* REFATORADO: NotificationCenter component */}
            <NotificationCenter
              notifications={notifications}
              showNotifications={showNotifications}
              onToggle={toggleNotifications}
              onMarkAllRead={markAllRead}
              onClear={clearNotifications}
            />

            {/* ... resto dos action buttons ... */}
          </div>
        </header>

        <main className="flex-1 overflow-y-auto p-4 md:p-6 scroll-smooth bg-[#fdf8f6]">
          {/* ... todo o conteúdo do main existente permanece igual ... */}
        </main>
      </div>

      {/* ... todos os modais existentes ... */}
    </div>
  );
}

export default App;
